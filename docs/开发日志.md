# 智能救援小车视觉系统 - 开发日志

## 2025-11-17 v1.0.0 项目初始化与架构设计

### 主要工作
- 创建项目整体架构和目录结构
- 设计核心模块划分：颜色检测、小球跟踪、视觉核心
- 制定配置文件格式和参数定义

### 项目结构
```
rescue_vision/
├── config/               # 配置文件目录
├── src/                  # 源代码目录
├── tests/                # 测试数据目录
└── README.md             # 项目说明文档
```

### 2025.11.19
## 完成配置文件格式和参数定义
# 有一个主配置管理文件config.py，起到以下作用：
统一入口：作为所有配置的中央管理器，加载并整合其他配置文件
逻辑处理：包含配置相关的业务逻辑，如优先级计算、队伍颜色判断等
类型安全：提供Python类型提示和验证
动态配置：支持运行时查询和获取配置值
向后兼容：当JSON配置文件缺失时提供默认值
# game_strategy.json - 游戏策略配置:
专注于策略的配置，如得分规则、关键限制条件、最优运球组合、颜色识别精度、高风险场景、应急预案等
# hsv_thresholds.json - 颜色识别配置：
颜色识别的参数配置，如HSV阈值、颜色识别精度、颜色识别结果处理等
# exposure_presets.json - 相机曝光配置：
相机的曝光参数配置，如自动曝光、手动曝光、曝光时间、曝光增益等

###  2025.11.20
完成视觉串口通信代码，确定了数据包格式：
- 0xAA : 起始字节
- dx : X方向偏移量（2字节，little endian，有符号）
- dy : Y方向偏移量（2字节，little endian，有符号）
- ball_id : 小球颜色ID（1字节）
- 0x00 : 预留字节
- distance : 距离估计值（2字节，little endian，无符号）
- 0xBB : 结束字节
更改了视觉识别核心代码的安全区部分
完成主文件的编写，完成项目初始化

### 2025.11.21
修复文件bug,其他啥都没干

### 2025.11.22
增加日志系统
解决多个文件相对导入问题，改为绝对导入
队伍颜色配置改为只需要在配置文件game_strategy.json中添加team_color字段即可，不需要在main.py中添加
增加一个串口调试代码文件
更改README.md
统一数据包格式：
小球数据传输格式
- 0xAA : 起始字节
- dx : 2字节，小端序，有符号整数，表示水平方向偏移
- dy : 2字节，小端序，有符号整数，表示垂直方向偏移
- ball_id : 1字节，表示小球颜色 (0=红色, 1=蓝色, 2=黄色, 3=黑色)
- distance : 2字节，小端序，无符号整数，表示距离（毫米）
- 校验和 : 1字节，计算方式为 sum(packet[1:]) & 0xFF
- 0xBB : 结束字节
在串口调试代码中增加接收电控反馈的功能